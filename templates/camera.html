<html>
  <head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.7.2/aframe/build/aframe-ar.js"></script>

    <script>
       AFRAME.registerComponent('button', {
            init: function() {

                const gltf = document.querySelector('#objeto3D');
                const aumenta = document.querySelector('#aumentar');
                const disminuye = document.querySelector('#disminuir');
                const giroDerecha = document.querySelector('#gderecha');
                const giroIzda = document.querySelector('#gizquierda');

                var x = gltf.getAttribute('scale').x;
                var y = gltf.getAttribute('scale').y;
                var z = gltf.getAttribute('scale').z;

                var eje_rotacion = gltf.getAttribute('rotation').y;

                aumenta.addEventListener('click', function(ev, target){
                    console.log(gltf.getAttribute('scale'));
                    gltf.setAttribute('scale', x + " " + y + " "+ z);
                    x += 0.001;
                    y += 0.001;
                    z += 0.001;
                });

                disminuye.addEventListener('click', function(ev, target){
                    console.log(gltf.getAttribute('scale'));
                    gltf.setAttribute('scale', x + " " + y + " "+ z);
                    x -= 0.001;
                    y -= 0.001;
                    z -= 0.001;
                });


                giroDerecha.addEventListener('click', function(ev, target){
                    console.log(gltf.getAttribute('rotation'));
                    gltf.setAttribute('rotation', "0" + " " + eje_rotacion + " "+ "0");
                    eje_rotacion += 45;
                });


                giroIzda.addEventListener('click', function(ev, target){
                    console.log(gltf.getAttribute('rotation'));
                    gltf.setAttribute('rotation', "0" + " " + eje_rotacion + " "+ "0");
                    eje_rotacion -= 45;
                });
            }
        });
    </script>
    <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
  </head>

  <body style='margin : 0px; overflow: hidden;'></body>
    <div style='position: absolute; top: 10px; width:100%; text-align: center;z-index:1';>
      <h1 style="color:white;"><a style="text-decoration:none;" href="{{ url_for('dashboard') }}">
        PrintAR</a></h1>
    </div>
    <a-scene embedded arjs="debugUIEnabled: false;" vr-mode-ui="enabled: false">  
      <a-marker preset="hiro" emitevents="true" button>
        <a-entity id='objeto3D' obj-model="obj: url(/static/models/{{ file }});" position = "0 0 0" rotation="0 0 0" scale="0.01 0.01 0.01" ></a-entity>
      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>
    <div style='position: fixed; bottom: 16px; right: 16px; z-index:1';>
      <style>
          #recordButton:hover {
              cursor: pointer;
          }
      </style>
      
      <button type="button" id='gizquierda' class="btn btn-primary"><img src="https://img.icons8.com/material-sharp/24/000000/rotate-left.png"/></button>
      <button type="button" id='gderecha' class="btn btn-primary"><img src="https://img.icons8.com/material-sharp/24/000000/rotate-right.png"/></button>
      <button type="button" id='aumentar' class="btn btn-primary">+</button>
      <button type="button" id='disminuir'class="btn btn-primary">-</button>
    </div>
</body>
</html>



